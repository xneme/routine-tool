---
phase: 01.1-ui-refinements
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - app/src/main/java/com/routinetool/ui/components/TaskCard.kt
  - app/src/main/java/com/routinetool/ui/components/DeadlineBadge.kt
autonomous: true

must_haves:
  truths:
    - "Task cards appear visually distinct with subtle shadows (not flat blocks)"
    - "Overdue tasks have a subtle red-tinted background"
    - "Completed tasks have a subtle green-tinted background"
    - "Checkbox is on the right side of each task card"
    - "Deadline icons show color (primary/secondary) instead of monochrome gray"
    - "Reschedule options are hidden behind a collapsible Reschedule button"
  artifacts:
    - path: "app/src/main/java/com/routinetool/ui/components/TaskCard.kt"
      provides: "ElevatedCard with semantic tinting, repositioned checkbox, collapsible reschedule"
      contains: "ElevatedCard"
    - path: "app/src/main/java/com/routinetool/ui/components/DeadlineBadge.kt"
      provides: "Colored icon tints using MaterialTheme.colorScheme.primary/secondary"
      contains: "MaterialTheme.colorScheme.primary"
  key_links:
    - from: "TaskCard.kt"
      to: "CardDefaults.cardColors"
      via: "containerColor with errorContainer/tertiaryContainer/surfaceContainerLow"
      pattern: "errorContainer|tertiaryContainer|surfaceContainerLow"
    - from: "TaskCard.kt"
      to: "AnimatedVisibility"
      via: "collapsible reschedule options"
      pattern: "AnimatedVisibility.*expandVertically"
---

<objective>
Refine TaskCard and DeadlineBadge visual styling for better visual hierarchy and semantic differentiation.

Purpose: Address user feedback that task cards blend together and lack visual distinction. Implement Material 3 elevation, semantic color tinting, checkbox repositioning, icon colorization, and collapsible reschedule options.

Output: Enhanced TaskCard.kt and DeadlineBadge.kt with all card-level visual refinements complete.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01.1-ui-refinements/01.1-RESEARCH.md

# Existing files to modify
@app/src/main/java/com/routinetool/ui/components/TaskCard.kt
@app/src/main/java/com/routinetool/ui/components/DeadlineBadge.kt
</context>

<tasks>

<task type="auto">
  <name>Task 1: Enhance TaskCard with elevation, semantic tinting, and checkbox repositioning</name>
  <files>app/src/main/java/com/routinetool/ui/components/TaskCard.kt</files>
  <action>
Modify TaskCard.kt to implement the following changes:

1. **Replace Card with ElevatedCard:**
   - Import `ElevatedCard` from material3
   - Change `Card(...)` to `ElevatedCard(...)`
   - Add elevation: `elevation = CardDefaults.cardElevation(defaultElevation = 2.dp)`

2. **Implement semantic container colors:**
   - Import: `androidx.compose.material3.MaterialTheme`
   - Replace the current containerColor logic with:
   ```kotlin
   colors = CardDefaults.cardColors(
       containerColor = when {
           task.isCompleted -> MaterialTheme.colorScheme.tertiaryContainer
           isOverdue -> MaterialTheme.colorScheme.errorContainer
           else -> MaterialTheme.colorScheme.surfaceContainerLow
       }
   )
   ```

3. **Update text colors to match containers:**
   - For completed tasks, use `onTertiaryContainer`
   - For overdue tasks, use `onErrorContainer`
   - For normal tasks, use `onSurface`
   - Apply to both title Text and description Text

4. **Reposition checkbox to right side:**
   - Remove Checkbox from the beginning of the Row
   - Create a right-side Column containing: deadline badge (if present), then Checkbox below it
   - Layout structure:
   ```
   Row(fillMaxWidth, SpaceBetween) {
       // Left: title only (with weight(1f))
       Text(title, modifier = Modifier.weight(1f))

       // Right: Column with deadline badge on top, checkbox below
       Column(horizontalAlignment = End) {
           if (hasDeadline) DeadlineBadge(...)
           Checkbox(...)
       }
   }
   ```

5. **Make reschedule options collapsible:**
   - Add imports: `androidx.compose.animation.AnimatedVisibility`, `androidx.compose.animation.expandVertically`, `androidx.compose.animation.shrinkVertically`, `androidx.compose.material.icons.filled.ExpandMore`, `androidx.compose.material.icons.filled.ExpandLess`
   - Add local state: `var isRescheduleExpanded by remember { mutableStateOf(false) }`
   - Wrap the reschedule buttons Row in AnimatedVisibility:
   ```kotlin
   TextButton(onClick = { isRescheduleExpanded = !isRescheduleExpanded }) {
       Text("Reschedule")
       Icon(
           imageVector = if (isRescheduleExpanded) Icons.Filled.ExpandLess else Icons.Filled.ExpandMore,
           contentDescription = null
       )
   }
   AnimatedVisibility(
       visible = isRescheduleExpanded,
       enter = expandVertically(),
       exit = shrinkVertically()
   ) {
       Row(horizontalArrangement = Arrangement.spacedBy(8.dp)) {
           TextButton(onClick = { onReschedule(tomorrow) }) { Text("Tomorrow") }
           TextButton(onClick = { onReschedule(oneWeekLater) }) { Text("+1 week") }
           TextButton(onClick = { onDismissOverdue() }) { Text("Remove deadline") }
       }
   }
   ```

6. **Remove the alpha modifier for done tasks** (color tinting replaces this):
   - The alpha(0.6f) modifier is applied in TaskListScreen, but now tertiaryContainer provides visual distinction
   - Note: This removal will happen in Plan 02 when modifying TaskListScreen

IMPORTANT: Keep all existing functionality (haptic feedback, expand/collapse, edit button, etc.).
  </action>
  <verify>
Run `./gradlew assembleDebug` from project root - build should complete without errors.
Verify imports are correct and no unresolved references.
  </verify>
  <done>
TaskCard uses ElevatedCard with 2.dp elevation, semantic container colors (errorContainer for overdue, tertiaryContainer for done, surfaceContainerLow for active), checkbox positioned on right side, and reschedule options hidden behind collapsible button.
  </done>
</task>

<task type="auto">
  <name>Task 2: Colorize DeadlineBadge icons</name>
  <files>app/src/main/java/com/routinetool/ui/components/DeadlineBadge.kt</files>
  <action>
Modify DeadlineBadge.kt to use semantic colors instead of monochrome gray:

1. **Change icon tint from onSurfaceVariant to semantic colors:**
   - Soft deadline (Schedule icon): `tint = MaterialTheme.colorScheme.primary`
   - Hard deadline (Bookmark icon): `tint = MaterialTheme.colorScheme.secondary`

2. **Update the Icon composable:**
   ```kotlin
   Icon(
       imageVector = if (isHardDeadline) Icons.Filled.Bookmark else Icons.Filled.Schedule,
       contentDescription = if (isHardDeadline) "Hard deadline" else "Soft deadline",
       tint = if (isHardDeadline)
           MaterialTheme.colorScheme.secondary
       else
           MaterialTheme.colorScheme.primary
   )
   ```

3. **Optionally update text color** to use primary/secondary to match icon (or keep onSurfaceVariant for subtlety - user preference):
   - Keep text as `onSurfaceVariant` for now (subtle) - this is a reasonable default
   - The icons provide the color cue, text stays readable

This is a minimal change - the file structure stays the same, just the tint parameter values change.
  </action>
  <verify>
Run `./gradlew assembleDebug` from project root - build should complete without errors.
Verify the Icon tint parameter references valid colorScheme properties.
  </verify>
  <done>
DeadlineBadge displays soft deadline icon (Schedule) in primary color and hard deadline icon (Bookmark) in secondary color, providing visual distinction between deadline types.
  </done>
</task>

</tasks>

<verification>
After completing both tasks:

1. Build succeeds: `./gradlew assembleDebug`
2. No lint errors in modified files
3. TaskCard.kt contains:
   - `ElevatedCard` import and usage
   - `errorContainer`, `tertiaryContainer`, `surfaceContainerLow` color references
   - `AnimatedVisibility` for reschedule section
   - Checkbox in a right-side Column layout
4. DeadlineBadge.kt contains:
   - `MaterialTheme.colorScheme.primary` and `secondary` tint values
</verification>

<success_criteria>
- Build compiles successfully
- TaskCard uses ElevatedCard with elevation and semantic container colors
- Checkbox is positioned on the right side of task cards
- Reschedule options are behind a collapsible "Reschedule" button
- Deadline icons use primary/secondary colors instead of gray
</success_criteria>

<output>
After completion, create `.planning/phases/01.1-ui-refinements/01.1-01-SUMMARY.md`
</output>
